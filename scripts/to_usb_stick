#!/bin/bash
#
# Putting games on USB sticks is handy for sharing them with friends. Everyone
# uses Windows, so this makes a Window build of the game and puts it to a USB
# stick.
#
# Usage:
#
#   $ sudo apt install wine rsync
#   $ make clean
#   $ scripts/to_usb_stick '/media/<user>/<usb stick name>'
#
# You can skip 'make clean' if you haven't recently ran non-Windows builds.

set -ex
dest="$1"

(source winbuildenv && make -j2 build/game.exe)
rsync -rvu --delete build "$dest"
