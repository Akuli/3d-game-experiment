#!/bin/bash
# sudo apt install imagemagick

set -ex

# https://superuser.com/q/1077910
convert="convert +set date:create +set date:modify"

# Create assets/buttons/big and assets/buttons/small from assets/buttons/huge
cd assets/buttons
rm -rvf tiny small medium big thick
mkdir -vp {tiny,small,medium,big,thick}/{horizontal,vertical}

for file in $(cd huge/narrow && echo */*.png); do
    $convert huge/narrow/$file -resize 55x55 small/$file
    $convert huge/narrow/$file -resize 100x100 thick/$file
done

for file in $(cd huge/wide && echo */*.png); do
    $convert huge/wide/$file -resize 65x65   tiny/$file
    $convert huge/wide/$file -resize 150x150 medium/$file
    $convert huge/wide/$file -resize 300x300 big/$file
done

for dir in {tiny,small,medium,big,thick}/*; do
    if [ -f $dir/normal.png ]; then
        # MS gives the darkest out of all i tried (MS, RMS, Average, Brightness, Lightness)
        $convert $dir/normal.png -grayscale MS $dir/disabled.png
    fi
done

cd ../buttonpics
$convert huge-right.png -resize 30x30 right.png
$convert huge-right.png -resize 30x30 -rotate 90 down.png
$convert huge-right.png -resize 30x30 -rotate 180 left.png
$convert huge-right.png -resize 30x30 -rotate 270 up.png
$convert huge-wall.png -resize 60x60 wall.png
$convert huge-enemy.png -resize 60x60 enemy.png
$convert ../jumper.png -resize 60x60 jumper.png

cd ../listbox
$convert huge/normal.png -scale '500x25!' normal.png
$convert huge/selected.png -scale '500x25!' selected.png
